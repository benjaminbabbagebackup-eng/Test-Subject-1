# yaml-language-server: $schema=https://schema.blue-build.org/recipe-v1.json
name: test-subject-1
description: Fedora KDE + OGC Kernel + Disk & File Management Suite
base-image: ghcr.io/ublue-os/kinoite-main
image-version: latest

modules:
  - type: rpm-ostree
    repos:
      # Starship: This works with Fedora 43 via the version variable
      - https://copr.fedorainfracloud.org/coprs/atim/starship/repo/fedora-%OS_VERSION%/atim-starship-fedora-%OS_VERSION%.repo
      
      # OGC: Explicitly set to fedora-42 to avoid the 404 error on their server
      - https://copr.fedorainfracloud.org/coprs/g/open-gaming-collective/kernel/repo/fedora-42/open-gaming-collective-kernel-fedora-42.repo
    install:
      - starship
      # OGC Kernel & AMD Vulkan
      - kernel-ogc
      - mesa-vulkan-drivers
      - mesa-vulkan-drivers.i686
      # DISK MANAGEMENT ESSENTIALS
      - partitionmanager
      - gparted
      - gnome-disk-utility
      - btrfs-progs
      - smartmontools
      # Gaming Suite
      - vkbasalt
      - mangohud
      - gamemode
      - lutris
      - goverlay
      - gamescope
      # Productivity & Utils
      - ark
      - filelight
      - kfind
      - kcalc
      - kwrite
      - kate
      - fcitx5
      - spectacle
      - kronometer

  - type: default-flatpaks
    configurations:
      - scope: system
        install:
          # APPS & GAMING
          - com.valvesoftware.Steam
          - com.heroicgameslauncher.hgl
          - dev.vencord.Vesktop
          - net.davidotek.pupgui2 # ProtonUp-Qt
          - com.vysp3r.ProtonPlus
          - io.github.radiolamp.mangojuice
          - com.github.Matoking.protontricks
          # TOOLS
          - com.github.qarmin.czkawka
          - io.github.flattool.Warehouse
          - io.github.kolunmi.Bazaar
          - com.ranfdev.DistroShelf
          - com.github.tchx84.Flatseal

  - type: script
    scripts:
      - |
        #!/bin/bash
        # Set Power Profile to Balanced
        powerprofilesctl set balanced
        # Optimize disk I/O for gaming
        echo mq-deadline > /sys/block/sda/queue/scheduler 2>/dev/null || true
